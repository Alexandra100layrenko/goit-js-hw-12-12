{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// pixabay-api.js\nimport axios from 'axios';\n\nconst API_KEY = '42772780-849d5e67a8b9b0ab7e6b7483b';\n\nexport default {\n  async fetchImages(query, page = 1, perPage = 15) {\n    try {\n      const response = await axios.get(\n        `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`\n      );\n\n      if (!response.data.hits.length) {\n        throw new Error('No images found');\n      }\n\n      return response.data.hits;\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      throw error;\n    }\n  },\n};\n","// render-functions.js\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGallery(images) {\n  const galleryList = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n\n  if (!galleryList || !loadMoreBtn) {\n    console.error('Gallery list or Load more button not found');\n    return;\n  }\n\n  const galleryItems = images\n    .map(\n      (image) => `\n        <li class=\"gallery-item\">\n          <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n            <img\n              src=\"${image.webformatURL}\"\n              alt=\"${image.tags}\"\n              class=\"gallery-image\"\n            />\n          </a>\n          <div class=\"image-info\">\n            <div class=\"info-item\">Likes: ${image.likes}</div>\n            <div class=\"info-item\">Views: ${image.views}</div>\n            <div class=\"info-item\">Comments: ${image.comments}</div>\n            <div class=\"info-item\">Downloads: ${image.downloads}</div>\n            <div class=\"downloads\">Downloads</div>\n            <div class=\"width-text\">Width</div>\n            <div class=\"width-value\">43px</div>\n          </div>\n        </li>\n      `\n    )\n    .join('');\n\n  galleryList.innerHTML += galleryItems;\n\n  // Добавлено условие для отображения кнопки Load more\n  if (images.length > 0) {\n    loadMoreBtn.classList.remove('hidden');\n  }\n}\n\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('visible');\n  } else {\n    console.error('Loader not found');\n  }\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('visible');\n  } else {\n    console.error('Loader not found');\n  }\n}\n\nexport function showEndMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\n  ","// main.js\nimport { renderGallery, showLoader, hideLoader, showEndMessage } from './js/render-functions.js';\nimport pixabayApi from './js/pixabay-api.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  const query = searchInput.value.trim();\n\n  if (!query) {\n    showWarning('Please enter a search query!');\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const images = await pixabayApi.fetchImages(query, currentPage);\n    renderGallery(images);\n\n    if (images.length < 15) {\n      loadMoreBtn.classList.add('hidden');\n      showEndMessage();\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    handleError(error);\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const images = await pixabayApi.fetchImages(searchInput.value.trim(), currentPage);\n    renderGallery(images);\n\n    if (images.length < 15) {\n      loadMoreBtn.classList.add('hidden');\n      showEndMessage();\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    handleError(error);\n  } finally {\n    hideLoader();\n  }\n});\n\n// Добавленный код для выделения активного состояния поля ввода\nsearchInput.addEventListener('focus', () => {\n  searchInput.classList.add('active');\n});\n\nsearchInput.addEventListener('blur', () => {\n  searchInput.classList.remove('active');\n});\n\nfunction showWarning(message) {\n  iziToast.warning({\n    title: 'Warning',\n    message: message,\n  });\n}\n\nfunction handleError(error) {\n  console.error('Error:', error);\n  showErrorMessage('An error occurred. Please try again later.');\n}\n\nfunction showErrorMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n"],"names":["API_KEY","pixabayApi","query","page","perPage","response","axios","error","renderGallery","images","galleryList","loadMoreBtn","galleryItems","image","showLoader","loader","hideLoader","showEndMessage","iziToast","searchForm","searchInput","currentPage","event","showWarning","handleError","message","showErrorMessage"],"mappings":"6vBAGA,MAAMA,EAAU,qCAEDC,EAAA,CACb,MAAM,YAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/C,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAC3B,gCAAgCN,CAAO,MAAME,CAAK,iEAAiEC,CAAI,aAAaC,CAAO,EACnJ,EAEM,GAAI,CAACC,EAAS,KAAK,KAAK,OACtB,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACF,CACH,EClBO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,GAAI,CAACD,GAAe,CAACC,EAAa,CAChC,QAAQ,MAAM,4CAA4C,EAC1D,MACD,CAED,MAAMC,EAAeH,EAClB,IACEI,GAAU;AAAA;AAAA,qBAEIA,EAAM,aAAa;AAAA;AAAA,qBAEnBA,EAAM,YAAY;AAAA,qBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4CAKaA,EAAM,KAAK;AAAA,4CACXA,EAAM,KAAK;AAAA,+CACRA,EAAM,QAAQ;AAAA,gDACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAO1D,EACA,KAAK,EAAE,EAEVH,EAAY,WAAaE,EAGrBH,EAAO,OAAS,GAClBE,EAAY,UAAU,OAAO,QAAQ,CAEzC,CAGO,SAASG,GAAa,CAC3B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,EACFA,EAAO,UAAU,IAAI,SAAS,EAE9B,QAAQ,MAAM,kBAAkB,CAEpC,CAEO,SAASC,GAAa,CAC3B,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,EACFA,EAAO,UAAU,OAAO,SAAS,EAEjC,QAAQ,MAAM,kBAAkB,CAEpC,CAEO,SAASE,GAAiB,CAC/BC,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACb,CAAG,CACH,CClEA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDT,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIU,EAAc,EAElBF,EAAW,iBAAiB,SAAU,MAAOG,GAAU,CACrDA,EAAM,eAAc,EACpB,MAAMpB,EAAQkB,EAAY,MAAM,KAAI,EAEpC,GAAI,CAAClB,EAAO,CACVqB,EAAY,8BAA8B,EAC1C,MACD,CAEDT,IAEA,GAAI,CACF,MAAML,EAAS,MAAMR,EAAW,YAAYC,EAAOmB,CAAW,EAC9Db,EAAcC,CAAM,EAEhBA,EAAO,OAAS,IAClBE,EAAY,UAAU,IAAI,QAAQ,EAClCM,KAEAN,EAAY,UAAU,OAAO,QAAQ,CAExC,OAAQJ,EAAO,CACdiB,EAAYjB,CAAK,CACrB,QAAY,CACRS,GACD,CACH,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CAChDU,GAAe,EACfP,IAEA,GAAI,CACF,MAAML,EAAS,MAAMR,EAAW,YAAYmB,EAAY,MAAM,OAAQC,CAAW,EACjFb,EAAcC,CAAM,EAEhBA,EAAO,OAAS,IAClBE,EAAY,UAAU,IAAI,QAAQ,EAClCM,KAEAN,EAAY,UAAU,OAAO,QAAQ,CAExC,OAAQJ,EAAO,CACdiB,EAAYjB,CAAK,CACrB,QAAY,CACRS,GACD,CACH,CAAC,EAGDI,EAAY,iBAAiB,QAAS,IAAM,CAC1CA,EAAY,UAAU,IAAI,QAAQ,CACpC,CAAC,EAEDA,EAAY,iBAAiB,OAAQ,IAAM,CACzCA,EAAY,UAAU,OAAO,QAAQ,CACvC,CAAC,EAED,SAASG,EAAYE,EAAS,CAC5B,SAAS,QAAQ,CACf,MAAO,UACP,QAASA,CACb,CAAG,CACH,CAEA,SAASD,EAAYjB,EAAO,CAC1B,QAAQ,MAAM,SAAUA,CAAK,EAC7BmB,EAAiB,4CAA4C,CAC/D,CAEA,SAASA,EAAiBD,EAAS,CACjC,SAAS,MAAM,CACb,MAAO,QACP,QAASA,CACb,CAAG,CACH"}